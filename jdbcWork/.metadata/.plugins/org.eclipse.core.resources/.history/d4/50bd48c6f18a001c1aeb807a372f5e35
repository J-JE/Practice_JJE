package com.kh.controller;

import static com.kh.common.JDBCTemplate.*;

import java.util.ArrayList;

import com.kh.common.exception.ProductException;
import com.kh.model.dto.Product;
import com.kh.model.vo.ProductIO;
import com.kh.service.ProductService;
import com.kh.view.ProductMenu;

public class ProductController {


	public void selectAll() { //전체 조회
		// TODO Auto-generated method stub
		
	}

	public void insertProduct(Product inputProduct) { //상품 추가
		// TODO Auto-generated method stub
		
	}

	public void updateProduct(String inputPid) { //상품 수정
		// TODO Auto-generated method stub
		
	}

	public void deleteProduct(String inputPid) { //상품 삭제
		// TODO Auto-generated method stub
		
	}

	public void searchProduct(String inputPname) { //상품 검색
		// TODO Auto-generated method stub
		
	}


	public void selectAllIo() { //전체 입출고 내역 조회
		ProductMenu menu = new ProductMenu();
		ArrayList<ProductIO> list;
		
		try {
			list = new ProductService().selectAllIo();
			if(!list.isEmpty()) {
				menu.displayProductList(list);
			}else {
				menu.displayNoData();
			}
		} catch (ProductException e) {
			menu.displayError("전체 입출고 내역 조회 실패, 관리자에게 문의하세요.");
			System.out.println(e.getMessage());
		}
		
	}

	public void selectInOut(int i) { //입/출고 내역 조회
		ProductMenu menu = new ProductMenu();
		ArrayList<ProductIO> list;

		try {
			list = new ProductService().selectInOut(i);
			if(!list.isEmpty()) {
				menu.displayProductList(list);
			}else {
				menu.displayNoData();
			}		
		} catch (ProductException e) {
			menu.displayError("전체 입출고 내역 조회 실패, 관리자에게 문의하세요.");
			System.out.println(e.getMessage());
		}
		
	}

	public void productInOut(ProductIO p) { //상품 입/출고
		ProductMenu menu = new ProductMenu();
		int result;

		if(p.getStatus() == "입고") {
			try {
				result = new ProductService().ProductInOut(p);

				if(result > 0) {
					new ProductMenu().displaySuccess("성공적으로 입고하였습니다.");
				}
			} catch (ProductException e) {
				menu.displayError("상품 입고 실패, 관리자에게 문의하세요.");
				System.out.println(e.getMessage());
			}
		}else {
			try {
				result = new ProductService().ProductInOut(p);

				if(result > 0) {
					new ProductMenu().displaySuccess("성공적으로 출고하였습니다.");
				}
			} catch (ProductException e) {
				menu.displayError("출고하고자 하는 제품의 재고 수량이 부족합니다.");
			} catch (Exception e) {
				menu.displayError("상품 출고 실패, 관리자에게 문의하세요.");
				System.out.println(e.getMessage());
			}
		}
	}

}
